<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejercicio 27</title>
    <!--BOOTSTRAP-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">

</head>
<body>
    <div class="container">
        <h1>Ejercicios de Programaci√≥n en JavaScript</h1>
    <h3>Mario Edmundo Ac Hern√°ndez</h3>
    <h3>No. Control: 18390055</h3>
    <div class="mt-4 mb-2">
        <a href="../../Vista/act-unidad3.html#tema_3.4" class="fs-4">Regresar</a>
    </div>
    <h3>Ejercicio 27</h3>
    <p>"Ejecuci√≥n del ejercicio en la consola"</p>
    <p>Programa una clase llamada Pelicula.<br>

        La clase recibir√° un objeto al momento de instanciarse con los siguentes datos: id de la pel√≠cula en IMDB, titulo, director, a√±o de estreno, pa√≠s o pa√≠ses de origen, g√©neros y calificaci√≥n en IMBD.<br><br>
            - Todos los datos del objeto son obligatorios.<br>
            - Valida que el id IMDB tenga 9 caracteres, los primeros 2 sean letras y los 7 restantes n√∫meros.<br>
            - Valida que el t√≠tulo no rebase los 100 caracteres.<br>
            - Valida que el director no rebase los 50 caracteres.<br>
            - Valida que el a√±o de estreno sea un n√∫mero entero de 4 d√≠gitos.<br>
            - Valida que el pa√≠s o paises sea introducidos en forma de arreglo.<br>
            - Valida que los g√©neros sean introducidos en forma de arreglo.<br>
            - Valida que los g√©neros introducidos esten dentro de los g√©neros aceptados*.<br>
            - Crea un m√©todo est√°tico que devuelva los g√©neros aceptados*.<br>
            - Valida que la calificaci√≥n sea un n√∫mero entre 0 y 10 pudiendo ser decimal de una posici√≥n.<br>
            - Crea un m√©todo que devuelva toda la ficha t√©cnica de la pel√≠cula.<br>
            - Apartir de un arreglo con la informaci√≥n de 3 pel√≠culas genera 3 instancias de la clase de forma automatizada e imprime la ficha t√©cnica de cada pel√≠cula.<br><br>
        
        * G√©neros Aceptados: Action, Adult, Adventure, Animation, Biography, Comedy, Crime, Documentary ,Drama, Family, Fantasy, Film Noir, Game-Show, History, Horror, Musical, Music, Mystery, News, Reality-TV, Romance, Sci-Fi, Short, Sport, Talk-Show, Thriller, War, Western</p>
    </div>

<script>
/*27) Programa una clase llamada Pelicula.

La clase recibir√° un objeto al momento de instanciarse con los siguentes datos: id de la pel√≠cula en IMDB, titulo, director, a√±o de estreno, pa√≠s o pa√≠ses de origen, g√©neros y calificaci√≥n en IMBD.
    - Todos los datos del objeto son obligatorios.
    - Valida que el id IMDB tenga 9 caracteres, los primeros 2 sean letras y los 7 restantes n√∫meros.
    - Valida que el t√≠tulo no rebase los 100 caracteres.
    - Valida que el director no rebase los 50 caracteres.
    - Valida que el a√±o de estreno sea un n√∫mero entero de 4 d√≠gitos.
    - Valida que el pa√≠s o paises sea introducidos en forma de arreglo.
    - Valida que los g√©neros sean introducidos en forma de arreglo.
    - Valida que los g√©neros introducidos esten dentro de los g√©neros aceptados*.
    - Crea un m√©todo est√°tico que devuelva los g√©neros aceptados*.
    - Valida que la calificaci√≥n sea un n√∫mero entre 0 y 10 pudiendo ser decimal de una posici√≥n.
    - Crea un m√©todo que devuelva toda la ficha t√©cnica de la pel√≠cula.
    - Apartir de un arreglo con la informaci√≥n de 3 pel√≠culas genera 3 instancias de la clase de forma automatizada e imprime la ficha t√©cnica de cada pel√≠cula.

* G√©neros Aceptados: Action, Adult, Adventure, Animation, Biography, Comedy, Crime, Documentary ,Drama, Family, Fantasy, Film Noir, Game-Show, History, Horror, Musical, Music, Mystery, News, Reality-TV, Romance, Sci-Fi, Short, Sport, Talk-Show, Thriller, War, Western*/

class Pelicula{

    constructor({idPelicula,titulo,director,estreno,pais,generos,calificacion}){
        this.idPelicula=idPelicula;
        this.titulo=titulo;
        this.director=director;
        this.estreno=estreno;
        this.pais=pais;
        this.generos=generos;
        this.calificacion=calificacion;

        this.validarIdPelicula(idPelicula);
        this.validarTitulo(titulo);
        this.validarDirector(director);
        this.validarEstreno(estreno);
        this.validarPais(pais);
        this.validarGeneros(generos);
        this.validarCalificacion(calificacion);
    }

    static get getListaGeneros(){
        return ["Action", "Adult", "Adventure", "Animation", "Biography", "Comedy", "Crime", "Documentary" ,"Drama", "Family", "Fantasy", "Film Noir", "Game-Show", "History", "Horror", "Musical", "Music", "Mystery", "News", "Reality-TV", "Romance", "Sci-Fi", "Short", "Sport", "Talk-Show", "Thriller", "War", "Western"];
    }

    static generosAceptados(){
        return console.info(`Los generos aceptados son: ${Pelicula.getListaGeneros.join(", ")}`);
    }
    
    //Valida que sea cadena de texto
    validarCadena(propiedad,valor){
        if(!valor){
            return console.warn(`${propiedad} "${valor}" est√° vac√≠o`);
        }
        
        if(typeof valor !== "string"){
            return console.error(`${propiedad} "${valor}" ingresado, NO es una cadena de texto`);
        }
        return true;
    }

    //Valida que sea cadena de texto
    validarNumero(propiedad,valor){
        if(!valor){
            return console.warn(`${propiedad} "${valor}" est√° vac√≠o`);
        }
        
        if(typeof valor !== "number"){
            return console.error(`${propiedad} "${valor}" ingresado, NO es un n√∫mero`);
        }
        return true;
    }

    //Valida que la longitud de la cadena sea correcta
    validarLongitud(propiedad,valor,longitud){
        if(valor.length > longitud){
            return console.error(`${propiedad} "${valor}" excede el n√∫mero de caracteres permitidos (${longitud})`);
        }
        return true;
    }

    //Se valida que sea un arreglo
    validarArreglo(propiedad,valor){
        if(valor===undefined){
                return console.warn(`${propiedad} "${valor}" est√° vac√≠o`);
        }
        if(!(valor instanceof Array)){
                return console.warn(`${propiedad} "${valor}" ingresado, NO es un arreglo`);
        }
        if(valor.length===0){
            return console.warn(`${propiedad} "${valor}" NO tiene datos`);
        }
        for (const numero of valor){
            if(typeof(numero) !== "string"){
                return console.error(`${propiedad} "${numero}" ingresado, NO es una cadena de texto`);
            }
        }
        return true;
    }

    //Valida que la id ingresada sea correcta
    validarIdPelicula(id){
        if(this.validarCadena("IMDB id",id)){
            if(!(/^([a-z]){2}([0-9]){7}$/.test(id))){
                return console.error(`El IMDB id "${id}" no es v√°lido, debe tener 9 caracteres, los 2 primeros letras minusculas y los 7 restantes n√∫meros.`)
            }
        }
    }

    //Valida que el a√±o de estreno ingresada sea correcta
    validarEstreno(estreno){
        if(this.validarNumero("A√±o de estreno",estreno)){
            if(!(/^([0-9]){4}$/.test(estreno))){
                return console.error(`El a√±o de estreno"${estreno}" no es v√°lido, debe ser un numero de 4 digitos`)
            }
        }
    }

    //Valida el titulo de la pelicula
    validarTitulo(titulo){
        if(this.validarCadena("Titulo",titulo)){
            this.validarLongitud("Titulo",titulo,100);
        }
    }

    //Valida el nombre del director
    validarDirector(director){
        if(this.validarCadena("Director",director)){
            this.validarLongitud("Director",director,50);
        }
    }

    //Valida el a√±o de estreno de la pelicula
    validarEstreno(estreno){
        if(this.validarNumero("Estreno",estreno)){
            this.validarLongitud("Estreno",estreno,4);
        }
    }

    validarPais(pais){
        this.validarArreglo("Pa√≠s", pais);
    }

    validarGeneros(generos){
        if(this.validarArreglo("Generos", generos)){
            for (const genero of generos){
                //console.log(genero, Pelicula.getListaGeneros.includes(genero))
                if(!(Pelicula.getListaGeneros.includes(genero))){
                    console.error(`G√©neros incorrectos "${generos.join(", ")}"`);
                    Pelicula.generosAceptados();
                }
            }
        }
    }

    validarCalificacion(calificacion){
        if(this.validarNumero("Calificacion",calificacion)){
            return (calificacion < 0 || calificacion > 10)
                ? console.log("La calificacion debe ser un n√∫mero entre 0 y 10")
                : this.calificacion = calificacion.toFixed(1);
        }
    }

    fichaTecnica(){
    console.info(`Ficha T√©cnica:\nTitulo: ${this.titulo}\nDirector: ${this.director}\nA√±o: ${this.estreno}\nPais: ${this.pais}\nG√©neros: ${this.generos}\nCalificaci√≥n: ${this.calificacion}\nIMDB id: ${this.idPelicula}`);
    }
}

    //tt0075148
    //tt0019130
    //tt0145487
    //tt4154796
    //Pelicula.generosAceptados();
    const peli= new Pelicula({
        idPelicula: "tt1234567",
        titulo: "SpiderMan",
        director: "Juan Carlos",
        estreno: 2021,
        pais: ["M√©xico","Canada"],
        generos: ["Action","Romance"],
        calificacion: 5.8967
    });
    console.log("-------------üéàüéàEjercicio 27 Clases y m√©todosüéàüéà-------------")
    peli.fichaTecnica();
    console.log("-----------Impresi√≥n din√°mica de fichas t√©nicas-----------")
    const misPeliculas = [
        {
            idPelicula: "tt9876543",
            titulo: "Avengers Infinity Wars",
            director: "Mario Ac",
            estreno: 2021,
            pais: ["USA","Canada"],
            generos: ["Action","Romance"],
            calificacion: 9.8929
        },
        {
            idPelicula: "tt1234567",
            titulo: "Rocky",
            director: "Roberto Ramirez",
            estreno: 2015,
            pais: ["Inglaterra"],
            generos: ["Action","Adventure"],
            calificacion: 8.6872
        },
        {
            idPelicula: "tt0145487",
            titulo: "Transformers",
            director: "Sofia Castillo",
            estreno: 2017,
            pais: ["USA"],
            generos: ["Action","Mystery"],
            calificacion: 9.762
        }
    ]

    misPeliculas.forEach(pelicula => { 
        new Pelicula(pelicula).fichaTecnica();
        console.log("---------------------------");
    });

</script>
</body>
</html>